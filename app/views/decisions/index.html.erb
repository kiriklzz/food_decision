<div class="pill">
  <span>ðŸ‘¤</span>
  <span><%= t("ui.signed_in_as", email: current_user.email) %></span>
</div>


    <h1 class="h1"><%= t("app.name", default: "FoodDecision") %></h1>
    <p class="muted"><%= t("ui.tagline") %></p>

    <div class="card" style="margin-top:14px;">
      <div class="row">
        <label><%= t("ui.theme", default: "Theme") %>:</label>

        <select id="themeSelect" class="input">
        <option value="random"><%= t("ui.random", default: "Random") %></option>
        <% Dish.distinct.order(:theme).pluck(:theme).each do |th| %>
            <option value="<%= th %>"><%= t("themes.#{th}", default: th) %></option>
        <% end %>
        </select>

        <button id="nextBtn" class="btn primary"><%= t("ui.next_image", default: "Next image") %></button>
        <span id="status" class="muted small"></span>
      </div>
    </div>

    <div id="dishCard" class="card" style="display:none; margin-top:14px;">
      <div class="row" style="justify-content:space-between;">
        <h2 id="dishTitle" style="margin:0;"></h2>
        <span id="themeBadge" class="pill"></span>
      </div>

      <div class="image-wrap">
        <img id="dishImage" class="image" alt="dish image" />
      </div>

      <div class="kpis">
        <div class="kpi" id="avgKpi">Avg: â€”</div>
        <div class="kpi" id="myKpi">My rating: â€”</div>
      </div>

      <p id="dishMeta" class="muted small" style="margin-top:10px;"></p>

      <div class="rate-group">
        <span class="muted"><%= t("ui.expert_rating", default: "Expert rating") %>:</span>
        <% (1..5).each do |s| %>
          <button class="btn rate-btn" data-score="<%= s %>"><%= s %></button>
        <% end %>
        <span id="ratingInfo" class="muted small"></span>
      </div>
    </div>

    <script>
  window.CSRF_TOKEN = "<%= form_authenticity_token %>";
  window.API_NEXT_URL = "<%= api_dishes_next_path %>";
  window.API_RATINGS_URL = "<%= api_ratings_path %>";

  window.I18N_LOADING = "<%= t('ui.loading', default: 'Loading...') %>";
  window.I18N_SAVED   = "<%= t('ui.saved', default: 'Saved') %>";
  window.I18N_ERROR   = "<%= t('ui.error', default: 'Error') %>";

  window.I18N_AVG_LABEL = "<%= t('ui.avg', default: 'Avg') %>";
  window.I18N_MY_LABEL  = "<%= t('ui.my_rating', default: 'My rating') %>";

  window.I18N_META = "<%= t('ui.meta',
    default: 'Theme: %{theme} | Avg: %{avg} | My rating: %{my}',
    theme: '%{theme}', avg: '%{avg}', my: '%{my}') %>";

  window.I18N_THEMES = <%= {
    "fast" => t("themes.fast", default: "fast"),
    "healthy" => t("themes.healthy", default: "healthy"),
    "sweet" => t("themes.sweet", default: "sweet"),
    "salty" => t("themes.salty", default: "salty"),
    "comfort" => t("themes.comfort", default: "comfort")
  }.to_json.html_safe %>;
</script>


  </section>


    <div style="margin-top:14px;">
      <div class="pill">ðŸ’¡ Tip</div>
      <p class="muted small" style="margin-top:8px;">
        <%= t("ui.tip") %>
      </p>
    </div>
  </aside>
</div>
