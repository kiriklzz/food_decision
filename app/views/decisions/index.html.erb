<div class="grid">
  <section class="card soft">
    <div class="pill">
      <span>üë§</span>
      <span><%= t("ui.logged_in_as", default: "Logged in as") %>: <%= current_user.email %></span>
    </div>

    <h1 class="h1"><%= t("app.name", default: "FoodDecision") %></h1>
    <p class="muted">Pick a theme ‚Üí get an image ‚Üí rate it like an expert.</p>

    <div class="card" style="margin-top:14px;">
      <div class="row">
        <label><%= t("ui.theme", default: "Theme") %>:</label>

        <select id="themeSelect" class="input">
          <% Dish.distinct.order(:theme).pluck(:theme).each do |th| %>
            <option value="<%= th %>"><%= th %></option>
          <% end %>
        </select>

        <button id="nextBtn" class="btn primary"><%= t("ui.next_image", default: "Next image") %></button>
        <span id="status" class="muted small"></span>
      </div>
    </div>

    <div id="dishCard" class="card" style="display:none; margin-top:14px;">
      <div class="row" style="justify-content:space-between;">
        <h2 id="dishTitle" style="margin:0;"></h2>
        <span id="themeBadge" class="pill"></span>
      </div>

      <div class="image-wrap">
        <img id="dishImage" class="image" alt="dish image" />
      </div>

      <div class="kpis">
        <div class="kpi" id="avgKpi">Avg: ‚Äî</div>
        <div class="kpi" id="myKpi">My rating: ‚Äî</div>
      </div>

      <p id="dishMeta" class="muted small" style="margin-top:10px;"></p>

      <div class="rate-group">
        <span class="muted"><%= t("ui.rate", default: "Expert rating") %>:</span>
        <% (1..5).each do |s| %>
          <button class="btn rate-btn" data-score="<%= s %>"><%= s %></button>
        <% end %>
        <span id="ratingInfo" class="muted small"></span>
      </div>
    </div>

    <script>
  window.CSRF_TOKEN = "<%= form_authenticity_token %>";
  window.API_NEXT_URL = "<%= api_dishes_next_path %>";
  window.API_RATINGS_URL = "<%= api_ratings_path %>";

  window.I18N_LOADING = "<%= t('ui.loading', default: 'Loading...') %>";
  window.I18N_SAVED = "<%= t('ui.saved', default: 'Saved') %>";
  window.I18N_ERROR = "<%= t('ui.error', default: 'Error') %>";
  window.I18N_META = "<%= t('ui.meta', default: 'Theme: %{theme} | Avg: %{avg} | My rating: %{my}', theme: '%{theme}', avg: '%{avg}', my: '%{my}') %>";
</script>

  </section>

  <aside class="card">
    <h3 style="margin:0 0 8px;">Quick demo checklist</h3>
    <ul class="muted" style="margin:0; padding-left:18px;">
      <li>Sign in / Sign up</li>
      <li>Switch RU/EN</li>
      <li>Select theme + Next image</li>
      <li>Rate 1‚Äì5 (stored in DB)</li>
      <li>Open ‚ÄúMy ratings‚Äù for stats</li>
    </ul>

    <div style="margin-top:14px;">
      <div class="pill">üí° Tip</div>
      <p class="muted small" style="margin-top:8px;">
        Rate –Ω–µ—Å–∫–æ–ª—å–∫–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ —Ä–∞–∑–Ω—ã—Ö —Ç–µ–º–∞—Ö ‚Äî –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ ‚ÄúMy ratings‚Äù –ø–æ—è–≤–∏—Ç—Å—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞.
      </p>
    </div>
  </aside>
</div>
